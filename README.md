DragonServer
============

### Architecture

                    client
                      |
                      |-------------------------------------+
                      |                                     |
                      | http                                ^ subscribe
        +-----------------------------------+               |
        |                                   |               |
        |   php-fpm                         |               |
        |      |                            |<-------+      |
        |      | short lived unix sock      |        |  +-----------+
        |------|----------------------------|        |  |   IM      |
        |      |                            |        |  +-----------+
        |   syslog-ng                       |        |      |
        |      |                            |        |      |
        |------|----------------------------|        |      |
        |      | persistent unix sock       |        |      |
        |      |                            |        |      |
        |   directord                       |        |      |
        |      |                            |        |      |
        |      | persistent tcp             |        |      |
        +-----------------------------------+        |      |
               |                                     |      |
            +---------------------------+            |      |
            |                           |            |      |
        +---------------+     +---------------+      |      |
        |               |     |               |      |      |
        |  DragonServer |     |  DragonServer |      |      |
        |               |     |               |      |      |
        +---------------+     +---------------+      |      |
            |                           |            |      |
            +---------------------------+            |      |
                          |                          |      |
                          |     biz http call        |      |
                          |----------->--------------+      |
                          |                                 |
                          |     push                        |
                          +----------->---------------------+

